<!DOCTYPE html>
<html lang="en" data-mode="dark">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.92.0">
<meta name="theme" content="Color Your World -- gitlab.com/rmaguiar/hugo-theme-color-your-world">
























<title>Java/Spring - Dependency injection | </title>


<meta name="author" content="Rahil Rehan">
<meta name="description" content="Dependecy injection concepts in Java Spring">


<meta name="robots" content="index follow">




  
    <link rel="canonical" href="https://rahilrehan.github.io/posts/0001-dependency-injection/">
  








<meta property="og:site_name" content="">
<meta property="og:title" content="Java/Spring - Dependency injection">
<meta property="og:description" content="Dependecy injection concepts in Java Spring">
  <meta property="og:url" content="https://rahilrehan.github.io/posts/0001-dependency-injection/">








  <meta property="og:type" content="article">
  
  
    <meta property="article:published_time" content="2021-10-09">
    <meta property="article:modified_time" content="2021-10-09">
    <meta property="og:updated_time" content="2021-10-09">
  

  
    <meta property="article:author" content="Rahil Rehan">
  
  
  
  







  <meta name="twitter:dnt" content="on">












<meta name="theme-color" content="#222">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">



  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    
    
      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
      
    

  

    
    

    
    
      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
      
    

  

    
    

    
    
      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  

    
    

    

      
      
    

  







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "mainEntityOfPage": {
        "@type": "WebSite",
        "@id": "https:\/\/rahilrehan.github.io"
      },
      "headline": "Java/Spring - Dependency injection",
      "description": "Dependecy injection concepts in Java Spring",
      
      "url": "https:\/\/rahilrehan.github.io\/posts\/0001-dependency-injection\/",
      "inLanguage": "en",
      "datePublished": "2021-10-09",
      "dateModified": "2021-10-09",
      "wordCount" : "561",
      "publisher": {
        "@type": "Person",
        "name": "Rahil Rehan"
      },
      "author": {
        "@type": "Person",
        "name": "Rahil Rehan",
        "description": "I google things...",
        
      }
    }
  </script>






<link rel="stylesheet" href="https://rahilrehan.github.io/css/main.min.8e05f798b394986601b0549619b019d4fb9158b099e78d9b0070ef59a3ef192e.css" integrity="sha256-jgX3mLOUmGYBsFSWGbAZ1PuRWLCZ542bAHDvWaPvGS4=" crossorigin="anonymous">



<noscript>

  
  

  

    
      <meta name="theme-color" content="#7fc121">
    

  

  
  <link rel="stylesheet" href="https://rahilrehan.github.io/css/noscript.min.d2981530e31236824300f109882a46f4d23dffef8e9ddf6b1d309f1b843b1782.css" integrity="sha256-0pgVMOMSNoJDAPEJiCpG9NI9/&#43;&#43;Ond9rHTCfG4Q7F4I=" crossorigin="anonymous">

</noscript>



<link rel="preload" href="/fonts/open-sans-v17-latin-700.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/open-sans-v17-latin-italic.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/open-sans-v17-latin-regular.woff2" as="font" crossorigin="anonymous">
<link rel="preload" href="/fonts/oswald-v29-latin-700.woff2" as="font" crossorigin="anonymous">











<script src="https://rahilrehan.github.io/js/main.min.6291e9de07b9d50ccb74582d56dd1ad3b6015c25916f9fee32276f9e6bd85e3c.js" integrity="sha256-YpHp3ge51QzLdFgtVt0a07YBXCWRb5/uMidvnmvYXjw=" crossorigin="anonymous"></script>

  </head>

  <body>

    <header>
      

  <a href="/"></a>




  
    <nav aria-label="Main menu.">
      <ul>
        
          <li>
            <a class="btn" href="/">About</a>
          </li>
        
          <li>
            <a class="btn" href="/posts/">Posts</a>
          </li>
        
      </ul>
    </nav>
  


    </header>

    <div class="filler">
      

  <main>
    <article>
      <header>
        
        <h1>Java/Spring - Dependency injection</h1>

        
          <p>
            
              Published on <time datetime="2021-10-09">2021-10-09</time>
            
          </p>
        
        
        
        
      </header>
    
      
      







































  









  <h3 id="basics"><a class="anchor" href="#basics" title='Anchor for: Basics.'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a> Basics</h3> 

<ul>
<li>Spring has lot of modules</li>
<li>start.spring.io lists many spring modules which you can configure</li>
<li>spring boot is useful to build RESTfull web services. It makes developing spring applications easy by auto configuring default components. It is opinionated framework</li>
<li>fat jar -&gt; also includes tomcat. better solution if you want to deploy on cloud platforms</li>
</ul>





  <h3 id="dependency-injection"><a class="anchor" href="#dependency-injection" title='Anchor for: Dependency Injection.'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a> Dependency Injection</h3> 

<ul>
<li>Assume mail sender example, where we can have mailSender of type SMTP, POPM or MockMail.</li>
<li>We can have an interface MailSender which defines the common functionality and we implement the interface in SMTP, POPM or Mock class.</li>
<li>**Problem: object creation will be like: **
<ul>
<li>private MailSender  = new SMTPMailSender()</li>
<li>private MailSender  = new POPMMailSender()</li>
<li>private MailSender  = new MockMailSender()</li>
<li>we need to hardcode the type while creating object</li>
<li>can we automate this?</li>
<li>Add @Component annotation to any class which implements MailSender</li>
<li>Add @Autowired annotation when creating object</li>
<li><strong>how does it work:</strong>
<ul>
<li>When application starts all the beans gets setup
<ul>
<li>Beans: annotations at top level, whose object will be created and stored in <em>Application Context</em></li>
<li>Beans examples: @Component, @RestController</li>
</ul>
</li>
<li>When application is running and when we create objects variables for which we have annotations like @Autowired. Objects which were already created from application context are assigned to current variables.</li>
<li>i.e those objects from application context are injected into these variables and hence dependency injection</li>
</ul>
</li>
</ul>
</li>
<li>@Autowired also works on methods(setters, constructors, getters, any methods..)</li>
<li><strong>Multiple beans problem:</strong> when we create two classes from same interface and add @component annotation to both classes, and create object using interface using @autowired annotation, spring will be confused to choose between beans
<ul>
<li>one solution is to use camel-case variable names while creating objects which resemble the name of the class you want (ex: smtpMailSender)</li>
<li>you can also add name param to @component -&gt; @component(&ldquo;mockMail&rdquo;), and create object using the name mockMail</li>
<li>use extra @primary annotation, the bean which has this will get preference</li>
<li>you can also use @qualifier annotation to class, and also use @qualifier in setter or constructor, &hellip;etc</li>
</ul>
</li>
<li>Prefer constructor injection</li>
<li>@resource and @inject are similar to @autowired, but @autowired is very powerful, so use @autowired</li>
<li>Specializations of @component annotations
<ul>
<li>@Controller</li>
<li>@Service</li>
<li>@Repository</li>
<li>@Configuration</li>
<li>@SpringBootApplication(scanBasePackageClasses = {default.class, abc.class}) - scans through the package and puts any dependency injection components into application context</li>
<li>@RestController</li>
<li>&hellip;.. many others</li>
</ul>
</li>
<li>what if you import a dependency and you have to create object from there, you cannot add @component annotation dependency package
<ul>
<li>Create a new config class, which has methods to return objects from the external dependency</li>
<li>the new config class must have @Configuration annotation</li>
<li>and methods must have @Bean configuration</li>
<li>names of the methods can be used for object variable names</li>
</ul>
</li>
<li>use @Value annotation to access variables from .properties or .yaml files</li>
<li>an external config file takes more preference over internal config(application.properties)</li>
<li>**Profiles: **A spring application can be configure to behave differently in different environments using profiles
<ul>
<li>ex environments: dev, test, prod</li>
<li>provide in application.properties:
<ul>
<li>spring.profiles.active: book, dev</li>
</ul>
</li>
<li>you can also use particular beans in particular environments!
<ul>
<li>just	use @Profile(&ldquo;envName&rdquo;), can accepts bool, !envName</li>
</ul>
</li>
<li>@Conditional annotation, include or exclude beans based on arbitrary conditions
<ul>
<li>@ConditionalOnClass, OnProperty, OnMissingBean ..etc</li>
<li>configure bean based on presence of application property =&gt; @ConditionalOnProperty</li>
</ul>
</li>
</ul>
</li>
<li>In @Configuration classes, when we try to create same bean again from some method, spring still returns the cached bean only.
<ul>
<li>Caching does not happen when we use @Component annotation</li>
</ul>
</li>
<li>Always use @Configuration Classes</li>
</ul>



    </article>
  </main>


    </div>
    
    <footer>
      


  














<section class="req-js">
  <button class="outline-dashed" title="Change to light/dark mode."><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><use xlink:href="#adjust"/></svg></button><input class="outline-dashed" type="color" list="presets" value="#7fc121" title="Change accent color." aria-label="Change accent color."><datalist id="presets"><option value="#1dbc91"><option value="#7fc121"><option value="1dbc91"><option value="#dd587c"><option value="#f3a530"></datalist>
</section>



  <noscript>
    <p class="noscript">Unable to execute JavaScript. Some features were disabled.</p>
  </noscript>



    </footer>
    
    <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" aria-hidden="true">
      <symbol viewBox="0 0 512 512" id="adjust">
        <path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/>
      </symbol>
      
      
      
      
  
<symbol viewBox="0 0 448 512" id="hashtag">
  <path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/>
</symbol>


  <symbol viewBox="0 0 320 512" id="caret-down">
    <path d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"/>
  </symbol>


      
      
      
    </svg>
    
    
    

    
    

  </body>
</html>
